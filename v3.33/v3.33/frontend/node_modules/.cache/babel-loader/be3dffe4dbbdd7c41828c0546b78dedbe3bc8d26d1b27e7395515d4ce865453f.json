{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Store reference for accessing Redux state\nlet store=null;export const injectStore=_store=>{store=_store;};// Create axios instance with default config\nconst api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'}});// Add token and Ollama API URL to requests if they exist\napi.interceptors.request.use(config=>{var _store2;const token=localStorage.getItem('token');const ollamaApiUrl=(_store2=store)===null||_store2===void 0?void 0:_store2.getState().settings.ollamaApiUrl;if(token){config.headers.Authorization=\"Bearer \".concat(token);}if(ollamaApiUrl){config.headers['x-ollama-api-url']=ollamaApiUrl;}return config;},error=>{return Promise.reject(error);});// Handle response errors\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});// Auth API\nexport const authAPI={login:credentials=>api.post('/auth/login',credentials),register:userData=>api.post('/auth/register',userData),getProfile:()=>api.get('/auth/profile'),updatePreferences:preferences=>api.put('/auth/preferences',{preferences}),updateProfile:profileData=>api.put('/auth/profile',profileData)};// Models API\nexport const modelsAPI={getAll:()=>api.get('/models'),getOne:modelName=>api.get(\"/models/\".concat(modelName)),download:modelName=>api.post(\"/models/\".concat(modelName,\"/download\")),delete:modelName=>api.delete(\"/models/\".concat(modelName)),search:query=>api.get('/models/search',{params:{query}}),update:(modelName,data)=>api.put(\"/models/\".concat(modelName),data)};// Ollama API\nexport const ollamaAPI={getStatus:()=>api.get('/ollama/status'),getEndpoints:()=>api.get('/ollama/endpoints'),listModels:()=>api.get('/ollama/models'),pullModel:name=>api.post('/ollama/models/pull',{name}),generateText:(model,prompt,options)=>api.post('/ollama/generate',{model,prompt,options}),chat:(model,messages)=>api.post('/ollama/chat',{model,messages}),getModelInfo:modelName=>api.get(\"/ollama/models/\".concat(modelName)),createModelCopy:(source,destination)=>api.post('/ollama/models/copy',{source,destination})};// Error handler helper\nexport const handleApiError=error=>{var _error$response2,_error$response2$data,_error$response3,_error$response4;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||'An error occurred';const status=(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status;const data=(_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.data;return{message,status,data};};// Success response helper\nexport const handleApiSuccess=response=>{var _response$data;return{data:response.data,status:response.status,message:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message};};export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","store","injectStore","_store","api","create","baseURL","headers","interceptors","request","use","config","_store2","token","localStorage","getItem","ollamaApiUrl","getState","settings","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authAPI","login","credentials","post","register","userData","getProfile","get","updatePreferences","preferences","put","updateProfile","profileData","modelsAPI","getAll","getOne","modelName","download","delete","search","query","params","update","data","ollamaAPI","getStatus","getEndpoints","listModels","pullModel","name","generateText","model","prompt","options","chat","messages","getModelInfo","createModelCopy","source","destination","handleApiError","_error$response2","_error$response2$data","_error$response3","_error$response4","message","handleApiSuccess","_response$data"],"sources":["C:/Users/WORK/Desktop/ProjectsNew/v3.33/frontend/src/api/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Store reference for accessing Redux state\r\nlet store = null;\r\nexport const injectStore = _store => {\r\n  store = _store;\r\n};\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Add token and Ollama API URL to requests if they exist\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    const ollamaApiUrl = store?.getState().settings.ollamaApiUrl;\r\n    \r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    if (ollamaApiUrl) {\r\n      config.headers['x-ollama-api-url'] = ollamaApiUrl;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Handle response errors\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: (credentials) => api.post('/auth/login', credentials),\r\n  register: (userData) => api.post('/auth/register', userData),\r\n  getProfile: () => api.get('/auth/profile'),\r\n  updatePreferences: (preferences) => api.put('/auth/preferences', { preferences }),\r\n  updateProfile: (profileData) => api.put('/auth/profile', profileData)\r\n};\r\n\r\n// Models API\r\nexport const modelsAPI = {\r\n  getAll: () => api.get('/models'),\r\n  getOne: (modelName) => api.get(`/models/${modelName}`),\r\n  download: (modelName) => api.post(`/models/${modelName}/download`),\r\n  delete: (modelName) => api.delete(`/models/${modelName}`),\r\n  search: (query) => api.get('/models/search', { params: { query } }),\r\n  update: (modelName, data) => api.put(`/models/${modelName}`, data)\r\n};\r\n\r\n// Ollama API\r\nexport const ollamaAPI = {\r\n  getStatus: () => api.get('/ollama/status'),\r\n  getEndpoints: () => api.get('/ollama/endpoints'),\r\n  listModels: () => api.get('/ollama/models'),\r\n  pullModel: (name) => api.post('/ollama/models/pull', { name }),\r\n  generateText: (model, prompt, options) => \r\n    api.post('/ollama/generate', { model, prompt, options }),\r\n  chat: (model, messages) => \r\n    api.post('/ollama/chat', { model, messages }),\r\n  getModelInfo: (modelName) => api.get(`/ollama/models/${modelName}`),\r\n  createModelCopy: (source, destination) => \r\n    api.post('/ollama/models/copy', { source, destination })\r\n};\r\n\r\n// Error handler helper\r\nexport const handleApiError = (error) => {\r\n  const message = error.response?.data?.message || error.message || 'An error occurred';\r\n  const status = error.response?.status;\r\n  const data = error.response?.data;\r\n\r\n  return {\r\n    message,\r\n    status,\r\n    data\r\n  };\r\n};\r\n\r\n// Success response helper\r\nexport const handleApiSuccess = (response) => {\r\n  return {\r\n    data: response.data,\r\n    status: response.status,\r\n    message: response.data?.message\r\n  };\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}